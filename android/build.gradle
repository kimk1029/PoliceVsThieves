buildscript {
    ext {
        // React Native 0.80 기준(react-native/gradle/libs.versions.toml)
        buildToolsVersion = "35.0.0"
        minSdkVersion = 24
        // NOTE: 현재 로컬 Android SDK의 android-35 플랫폼에
        // core-for-system-modules.jar가 누락되어(:app:androidJdkImage) 빌드가 실패합니다.
        // 빌드가 가능한 플랫폼(34)로 맞춥니다. (SDK를 정상 설치하면 35로 되돌릴 수 있습니다)
        compileSdkVersion = 34
        targetSdkVersion = 34
        // 로컬 SDK에 설치된 NDK 버전으로 맞춥니다.
        // (RN 0.80 기본값은 27.1.12297006이지만, 설치된 버전이 없으면 빌드가 실패합니다.)
        ndkVersion = "27.0.12077973"
        kotlinVersion = "2.1.20"
        agpVersion = "8.9.2"
    }
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        // Pin plugin versions to avoid pulling incompatible latest versions
        classpath("com.android.tools.build:gradle:$agpVersion")
        classpath("com.facebook.react:react-native-gradle-plugin")
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion")
    }
}

apply plugin: "com.facebook.react.rootproject"

allprojects {
    repositories {
        // Naver Maps SDK
        maven { url "https://repository.map.naver.com/archive/maven" }
        // RN 0.80/AGP 8+ 에서도 하위 모듈 의존성 해석을 위해 유지
        google()
        mavenCentral()
    }
}

// Force a compatible Play Services Location version.
// - play-services-location 21.x -> FusedLocationProviderClient became an interface
// - react-native-geolocation-service expects it as a class and can crash at runtime
subprojects { proj ->
    proj.configurations.configureEach { cfg ->
        cfg.resolutionStrategy.force("com.google.android.gms:play-services-location:20.0.0")
    }
}
